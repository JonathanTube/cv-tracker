generator client {
  provider = "prisma-client"
  output   = "./client"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Country {
  id      String    @id @default(auto()) @map("_id") @db.ObjectId
  name    String    @unique
  Company Company[]
}

model Industry {
  id      String    @id @default(auto()) @map("_id") @db.ObjectId
  name    String    @unique
  Company Company[]
}

model Company {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  website     String
  country     Country  @relation(fields: [countryIds], references: [id])
  countryIds  String[] @db.ObjectId
  industry    Industry @relation(fields: [industryIds], references: [id])
  industryIds String[] @db.ObjectId
}

model TechStack {
  id   String @id @default(auto()) @map("_id") @db.ObjectId
  name String
  Job  Job[]
}

model Job {
  id            String        @id @default(auto()) @map("_id") @db.ObjectId
  title         String
  sourceUrl     String
  techStacks    TechStack     @relation(fields: [techStackId], references: [id])
  techStackId   String        @db.ObjectId
  onlineTestUrl String
  homeworkQuize String
  Application   Application[]
}

model User {
  id          String        @id @default(auto()) @map("_id") @db.ObjectId
  username    String
  nickname    String
  Application Application[]
}

model Application {
  id     String @id @default(auto()) @map("_id") @db.ObjectId
  user   User   @relation(fields: [userId], references: [id])
  userId String @db.ObjectId
  job    Job    @relation(fields: [jobId], references: [id])
  jobId  String @db.ObjectId
  state  String
}
